digraph G{
graph[bgcolor=transparent]
edge [fontname="FangSong"];
node [shape=box, fontname="FangSong" size="20,20",style=filled];


wait_prepay[label="wait_prepay,等待付定金"]
prepayed[label="prepayed,定金"]
wait_pay[label="wait_pay,货已ok，等待付全款"]
payed[label="payed,全款"]
packed[label="packed,打包完毕"]
wait_refund[label="wait_refund,买手确认采购失败，等待退款"]
refund[label="refund,已退款"]
returned[label="returned,未补全款，已退货"]
fail[label="fail,手工操作，退款了"]
to_demostic[label="to_demostic,国外到国内"]
to_user[label="to_user,国内到用户"]
post_sale[label="post_sale,售后"]
success[label="success,完成"]
canceled[label="canceled,取消"]
pre_canceled[label="pre_canceled,预备cancel。\n此时不能发起支付/预支付,但可以收到支付完成的回调"]
timeout[label="timeout,超时"]



wait_prepay->prepayed[label="用户付定金",color="#00ff00"]
wait_prepay->pre_canceled[label="过了10分钟仍未付款",color="#ffff00"]
pre_canceled->canceled[label="过了10分钟仍未付款",color="#ffff00"]
wait_pay->payed[label="用户付全款",color="#00ff00"]
to_user->success[label="用户确认收货",color="#00ff00"]
to_user->success[label="过了15天仍未确认收货",color="#ffff00"]
success->post_sale[label="用户申请售后服务",color="#00ff00"]

prepayed->wait_pay[label="买手采购",color="#0000ff"]
prepayed->wait_refund[label="买手采购失败",color="#0000ff"]
payed->packed[label="买手打包",color="#0000ff"]
packed->to_demostic[label="买手发货",color="#0000ff"]
timeout->returned[label="退货",color="#0000ff"]


wait_refund->refund[label="退定金",color="#ff0000"]
to_demostic->to_user[label="国内已收到包裹，转寄给用户",color="#ff0000"]
post_sale->success[label="完成售后服务",color="#ff0000"]


//wait_pay->timeout[label="一直没补款，超时了",color="#ffff00"]
wait_pay->pre_canceled[label="过了3天仍未付款",color="#ffff00"]

}


